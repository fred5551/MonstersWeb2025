<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monsters Web</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- ========== HEADER FRAGMENT ========== -->
<header th:fragment="header" id="header">
    <div class="header-content">
        <div class="logo">üê≤ Monsters Web</div>

        <nav id="main-nav">
            <!-- Lien Accueil - toujours visible -->
            <a th:href="@{/}" class="nav-btn">Accueil</a>

            <!-- Liens visibles uniquement si l'utilisateur est connect√© -->
            <a th:href="@{/exploration}" class="nav-btn" sec:authorize="isAuthenticated()">Exploration</a>
            <a th:href="@{/mon-equipe}" class="nav-btn" sec:authorize="isAuthenticated()">Mon √âquipe</a>
            <a th:href="@{/inventaire}" class="nav-btn" sec:authorize="isAuthenticated()">Inventaire</a>
            <a th:href="@{/combat}" class="nav-btn" sec:authorize="isAuthenticated()">Combat</a>

            <!-- Lien Admin - visible uniquement pour les ADMIN -->
            <a th:href="@{/monsters-web/admin}" class="nav-btn" sec:authorize="hasRole('ADMIN')"
               style="background: linear-gradient(135deg, rgba(255, 69, 0, 0.2) 0%, rgba(255, 69, 0, 0.1) 100%); border-color: rgba(255, 69, 0, 0.5); color: #FF4500;">
                üîß Admin
            </a>
        </nav>

        <div class="user-info">
            <!-- Si l'utilisateur est connect√© -->
            <div sec:authorize="isAuthenticated()" style="display: flex; align-items: center; gap: 1rem;">
                <span id="user-name" style="color: #7FFF00; font-weight: 700;" sec:authentication="name"></span>
                <form th:action="@{/logout}" method="post" style="margin: 0;">
                    <button type="submit" id="logout-btn"
                            style="background: linear-gradient(135deg, #FF4500 0%, #ff6b35 100%); border: none; color: white; padding: 0.7rem 1.4rem; border-radius: 10px; cursor: pointer; font-weight: 700;">
                        D√©connexion
                    </button>
                </form>
            </div>

            <!-- Si l'utilisateur n'est pas connect√© -->
            <div sec:authorize="!isAuthenticated()" style="display: flex; gap: 1rem;">
                <a th:href="@{/login}" class="nav-btn">Connexion</a>
                <a th:href="@{/inscription}"
                   style="background: linear-gradient(135deg, #7FFF00 0%, #00ff88 100%); color: #1C1E26; padding: 0.7rem 1.4rem; border-radius: 10px; font-weight: 700; text-decoration: none; border: none;">
                    Inscription
                </a>
            </div>
        </div>
    </div>
</header>

<!-- ========== FOOTER FRAGMENT ========== -->
<footer th:fragment="footer">
    <p>&copy; 2025 Monsters Web - Projet p√©dagogique BTS SIO</p>
    <div style="margin-top: 1rem;">
        <a th:href="@{/rgpd}" style="color: #7FFF00; text-decoration: none; margin: 0 1rem;">Politique de confidentialit√©</a>
        <a th:href="@{/contact}" style="color: #7FFF00; text-decoration: none; margin: 0 1rem;">Contact</a>
        <a th:href="@{/a-propos}" style="color: #7FFF00; text-decoration: none; margin: 0 1rem;">√Ä propos</a>
    </div>
</footer>

<!-- ========== MODAL RGPD FRAGMENT ========== -->
<div th:fragment="rgpd-modal" id="rgpd-modal" class="modal hidden">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Politique de Confidentialit√© RGPD</h2>
        <div class="rgpd-content">
            <h3>Collecte des donn√©es</h3>
            <p>Nous collectons uniquement les donn√©es n√©cessaires au fonctionnement du jeu : pseudo, email, et statistiques de jeu.</p>

            <h3>Utilisation des donn√©es</h3>
            <p>Vos donn√©es sont utilis√©es exclusivement pour votre exp√©rience de jeu et ne sont jamais partag√©es avec des tiers.</p>

            <h3>Vos droits</h3>
            <p>Conform√©ment au RGPD, vous disposez d'un droit d'acc√®s, de rectification et de suppression de vos donn√©es personnelles.</p>

            <h3>S√©curit√©</h3>
            <p>Les donn√©es sont stock√©es de mani√®re s√©curis√©e. Vos mots de passe sont chiffr√©s avec BCrypt.</p>

            <h3>Contact</h3>
            <p>Pour toute question : contact@monstersweb.fr</p>
        </div>
        <button class="modal-close-btn">Fermer</button>
    </div>
</div>

</body>
</html>